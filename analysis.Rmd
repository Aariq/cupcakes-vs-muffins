---
title: "Multivariate Analysis"
author: Eric R. Scott
output: html_notebook
---
```{r}
library(tidyverse)
library(ropls)
library(MVN)
```

# Load Data
```{r}
recipes_wide <- read_rds("recipes_wide.rds")
```

# Check multivariate normality
```{r}
mvn(select_if(recipes_wide, is.double), scale = TRUE, multivariatePlot = "qq")
mvn(select_if(recipes_wide, is.double), scale = TRUE, transform = "sqrt", multivariatePlot = "qq")
```
No, not multivariate normal and transformations do nothing because of all the zeroes probably.

# Do preliminary PCA
```{r}
recipe_pca <- opls(select_if(recipes_wide, is.double), scaleC = "standard", plotL = FALSE)
plot(recipe_pca,
     parAsColFcVn = recipes_wide$Type,
     parLabVc = recipes_wide$`Recipe ID`,
     parCompVi = c(1, 2))
```

